<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Multipliers Archetipų Testas v10.8 — Vieno failo (mobile-friendly)</title>
  <style>
    /* --------- Tema (CSS kintamieji) --------- */
    :root{--bg:#0e0f13;--panel:#171922;--text:#e8ecf1;--muted:#aab4c0;--accent:#59c173;--accent2:#66a6ff;--grid:#2a2e39;--border:#222636;--chip:#2a2e39}
    [data-theme="light"]{--bg:#f7f9fc;--panel:#ffffff;--text:#11161c;--muted:#576270;--accent:#167e56;--accent2:#2b6fff;--grid:#dfe5ef;--border:#d6dde8;--chip:#eef2f9}

    /* --------- Bendra --------- */
    html,body{height:100%}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;background:linear-gradient(135deg,var(--bg),#141823 70%);color:var(--text);margin:0}
    header{padding:12px 16px;background:var(--panel);position:sticky;top:0;border-bottom:1px solid var(--border);display:flex;gap:8px;align-items:center;z-index:10}
    h1{margin:0;font-size:18px;flex:1}
    .btn{background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#fff;padding:10px 12px;border-radius:10px;font-weight:600;cursor:pointer}
    .btn.secondary{background:transparent;color:var(--text);border:1px solid var(--border)}
    .btn.flat{background:var(--chip);color:var(--text);border:1px solid var(--border)}
    .btn:active{transform:scale(0.98)}

    main{display:grid;grid-template-columns:1.1fr 1fr;gap:14px;padding:16px}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.18)}
    .card h2{margin:0;padding:10px 12px;border-bottom:1px solid var(--border);font-size:16px}
    .content{padding:10px 12px}
    .legend{color:var(--muted);font-size:12px}
    .grid-note{color:var(--muted);font-size:12px;padding:0 12px 10px}
    .q{display:grid;grid-template-columns:1fr auto;align-items:center;gap:12px;padding:8px;border-bottom:1px dashed var(--grid)}
    .q:last-child{border-bottom:none}
    .scale{display:flex;gap:8px}
    .scale input{accent-color:var(--accent);width:20px;height:20px}
    .bad{color:#ff6b6b}
    #radarSvg{width:100%;height:360px;display:block}
    .summary{background:var(--chip);border:1px solid var(--border);border-radius:8px;padding:10px;margin-bottom:8px}
    .chips{display:flex;flex-wrap:wrap;gap:6px;margin:8px 0}
    .chip{background:var(--chip);border:1px solid var(--border);color:var(--text);font-size:12px;padding:4px 8px;border-radius:999px}
    .insights h3{margin:12px 0 6px;font-size:14px}
    .insights ul{margin:6px 0 10px 18px}
    footer{padding:12px 16px;color:var(--muted)}

    /* --------- Mobile --------- */
    @media (max-width: 920px){
      main{grid-template-columns:1fr}
      header{flex-wrap:wrap}
      h1{flex-basis:100%; margin-bottom:6px}
      .btn{padding:10px}
      #radarSvg{height:300px}
    }

    /* --------- Print (PDF naršyklėje) --------- */
    @media print{
      header,.actions,.grid-note{display:none!important}
      main{grid-template-columns:1fr}
      .card{page-break-inside:avoid}
      #radarSvg{height:480px}
    }
  </style>
</head>
<body>
  <header>
    <h1>Multipliers Archetipų Testas v10.8</h1>
    <button id="theme" class="btn flat">Tema: Tamsi/Šviesi</button>
    <button id="calc" class="btn">Apskaičiuoti</button>
    <button id="reset" class="btn secondary">Išvalyti</button>
    <button id="pdf" class="btn secondary">PDF (naršyklė)</button>
    <span class="legend" id="libStatus">Bibliotekos: SVG</span>
  </header>

  <main>
    <section class="card">
      <h2>Klausimynas</h2>
      <div class="content legend">25 klausimai (4×5 archetipai + 5 SP kontrolės). Likerto skalė 1–5. Klausimai sumaišomi kiekvieną kartą.</div>
      <div class="content" id="questions"></div>
      <div class="grid-note">Skalė: 1 – visiškai nesutinku, 5 – visiškai sutinku.</div>
      <div class="actions content">
        <span id="status" class="legend"></span>
      </div>
    </section>
    <section class="card">
      <h2>Rezultatai</h2>
      <div class="content">
        <div id="summary" class="summary legend">Kol kas neapskaičiuota.</div>
        <div class="chips" id="chips"></div>
        <svg id="radarSvg" viewBox="-250 -250 500 500" aria-label="Radar chart"></svg>
        <div class="grid-note">Archetipai: Talent Magnet, Liberator, Challenger, Debate Maker, Investor</div>
        <div class="insights" id="insights"></div>
      </div>
      <div class="content legend">
        <h3>Archetipų paaiškinimai</h3>
        <p><strong>Talent Magnet</strong> – pritraukia ir optimizuoja talentą; Paprastai – <em>pastebėk ir kviesk žmones atsiskleisti</em>.</p>
        <p><strong>Liberator</strong> – sukuria saugią, bet reikalaujančią erdvę; Paprastai – <em>leisk klysti, bet aiškiai susitark dėl standartų</em>.</p>
        <p><strong>Challenger</strong> – formuluoja ambiciją ir „kodėl“; Paprastai – <em>iškeli tikslą ir klausi „kaip padarysime?“</em>.</p>
        <p><strong>Debate Maker</strong> – kviečia skirtingas perspektyvas; Paprastai – <em>prieš sprendimą prašyk faktų ir nuomonių</em>.</p>
        <p><strong>Investor</strong> – deleguoja rezultatą ir suteikia resursus; Paprastai – <em>pasakyk rezultatą, duok resursus, susitark dėl patikros</em>.</p>
      </div>
    </section>
  </main>

  <footer>
    v10.8 · Vieno failo versija (mobile-friendly, be CDN). 
  </footer>

<script>
// --------- Duomenys ---------
const ARCH = [
  {key:'TM', name:'Talent Magnet'},
  {key:'LB', name:'Liberator'},
  {key:'CH', name:'Challenger'},
  {key:'DM', name:'Debate Maker'},
  {key:'IN', name:'Investor'}
];
const QUESTIONS = [
  {a:'TM', t:'Aš pastebiu žmonių stiprybes ir kviečiu jas panaudoti darbe.'},
  {a:'TM', t:'Skiriu laiką talentui atpažinti ir parinkti tinkamas užduotis.'},
  {a:'TM', t:'Padedu žmonėms atsiskleisti suteikdamas erdvę ir grįžtamąjį ryšį.'},
  {a:'TM', t:'Reguliariai kviečiu naujus žmones prisidėti prie svarbių temų.'},

  {a:'LB', t:'Aiškiai susitariame dėl standartų, bet leidžiu klysti mokantis.'},
  {a:'LB', t:'Kuriu saugią aplinką kalbėti apie problemas be kaltinimų.'},
  {a:'LB', t:'Skatinu komandoje drausmę laikytis susitarimų.'},
  {a:'LB', t:'Greitai reaguoju į nusižengimus, bet teisingai ir pagarbiai.'},

  {a:'CH', t:'Formuluoju ambiciją su aiškiu „kodėl“.'},
  {a:'CH', t:'Klausiu „kaip padarysime?“ vietoje „ar tai įmanoma?“'},
  {a:'CH', t:'Padedu komandai matyti didesnį paveikslą ir kryptį.'},
  {a:'CH', t:'Iššūkius paverčiu mokymosi galimybėmis.'},

  {a:'DM', t:'Prieš sprendimą kviečiu skirtingas perspektyvas ir faktus.'},
  {a:'DM', t:'Moku vesti konstruktyvias diskusijas be asmeniškumų.'},
  {a:'DM', t:'Skiriu laiko argumentų „už“ ir „prieš“ įvertinimui.'},
  {a:'DM', t:'Priimdamas sprendimą apibendrinu išgirstus požiūrius.'},

  {a:'IN', t:'Deleguoju rezultatą, o ne tik užduotis.'},
  {a:'IN', t:'Suteikiu reikiamus resursus ir pašalinu kliūtis.'},
  {a:'IN', t:'Sutariu dėl patikros taškų ir atsakomybės.'},
  {a:'IN', t:'Po delegavimo išlaikau pasitikėjimą ir palaikymą.'},

  {a:'SP', t:'Dažnai jaučiu stresą darbe (invertuotas).', inv:true},
  {a:'SP', t:'Vengiu neapibrėžtumo ir rizikos (invertuotas).', inv:true},
  {a:'SP', t:'Konfliktuose linkęs gintis, o ne ieškoti sprendimų (invertuotas).', inv:true},
  {a:'SP', t:'Retai prašau grįžtamojo ryšio (invertuotas).', inv:true},
  {a:'SP', t:'Dažnai atidėlioju svarbius pokalbius (invertuotas).', inv:true}
];

// --------- Render ---------
function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}return arr}
function renderQuestions(){
  const c = document.getElementById('questions'); c.innerHTML=''; let idx=0;
  for(const q of shuffle([...QUESTIONS])){
    const row = document.createElement('div'); row.className='q';
    const label = document.createElement('label'); label.innerHTML = `<strong>${(++idx).toString().padStart(2,'0')}.</strong> ${q.t}`;
    const scale = document.createElement('div'); scale.className='scale';
    for(let v=1; v<=5; v++){ const input = document.createElement('input'); input.type='radio'; input.name='q_'+idx; input.value=v; input.required=true; scale.appendChild(input); }
    row.appendChild(label); row.appendChild(scale);
    row.dataset.arch=q.a; row.dataset.inv=q.inv?'1':'0'; c.appendChild(row);
  }
}

// --------- Skaičiavimas ---------
function collect(){
  const rows=[...document.querySelectorAll('.q')];
  const scores={TM:0,LB:0,CH:0,DM:0,IN:0}; const counts={TM:0,LB:0,CH:0,DM:0,IN:0};
  let missing=0; let spRawSum=0; let spCount=0;
  for(const r of rows){
    const chosen=r.querySelector('input[type=radio]:checked'); if(!chosen){missing++; continue;}
    let v=Number(chosen.value);
    // SP – kaupiam ir raw (rizikos matui), ir invertuotą (pozityvui)
    if(r.dataset.arch==='SP'){ spRawSum += v; spCount += 1; }
    if(r.dataset.inv==='1') v=6-v; // invertuojam, kad aukštas balas reikštų Multipliers elgseną
    const a=r.dataset.arch; if(a in scores){scores[a]+=v; counts[a]+=1;}
  }
  const spRawAvg = spCount? (spRawSum/spCount) : 0; // 1..5 — kuo aukščiau, tuo didesnė rizika
  return {scores,counts,missing,spRawAvg};
}
function normalize(sum,cnt){return cnt?sum/cnt:0}

// --------- Radar (SVG) ---------
function drawRadar(vals){
  const svg=document.getElementById('radarSvg'); svg.innerHTML=''; const R=200, levels=5;
  const gridColor=getComputedStyle(document.body).getPropertyValue('--grid').trim();
  const labelColor=getComputedStyle(document.body).getPropertyValue('--muted').trim();
  for(let lvl=1; lvl<=levels; lvl++){ const r=(lvl/levels)*R; const pts=[]; for(let i=0;i<ARCH.length;i++){ const ang=(-90+i*360/ARCH.length)*Math.PI/180; pts.push(`${(r*Math.cos(ang)).toFixed(1)},${(r*Math.sin(ang)).toFixed(1)}`);} const poly=document.createElementNS('http://www.w3.org/2000/svg','polygon'); poly.setAttribute('points', pts.join(' ')); poly.setAttribute('fill','none'); poly.setAttribute('stroke',gridColor); svg.appendChild(poly); }
  for(let i=0;i<ARCH.length;i++){ const ang=(-90+i*360/ARCH.length)*Math.PI/180; const x=(220*Math.cos(ang)).toFixed(1); const y=(220*Math.sin(ang)).toFixed(1); const text=document.createElementNS('http://www.w3.org/2000/svg','text'); text.setAttribute('x',x); text.setAttribute('y',y); text.setAttribute('text-anchor','middle'); text.setAttribute('dominant-baseline','middle'); text.setAttribute('fill',labelColor); text.textContent=ARCH[i].name; svg.appendChild(text); }
  const pts=ARCH.map((_,i)=>{ const ang=(-90+i*360/ARCH.length)*Math.PI/180; const r=(vals[i]/5)*R; return `${(r*Math.cos(ang)).toFixed(1)},${(r*Math.sin(ang)).toFixed(1)}`; });
  const poly=document.createElementNS('http://www.w3.org/2000/svg','polygon'); poly.setAttribute('points', pts.join(' ')); poly.setAttribute('fill','rgba(102,166,255,0.25)'); poly.setAttribute('stroke','#66a6ff'); poly.setAttribute('stroke-width','2'); svg.appendChild(poly);
}

// --------- Interpretacija ---------
function classify(multAvg, spRisk){
  // Slenksčiai (praktiniai): Multiplier >=3.8 & rizika <=2.4; Accidental tarpinių; Diminisher <3.2 & rizika >=3.6
  if(multAvg>=3.8 && spRisk<=2.4) return 'Multiplier';
  if(multAvg<3.2 && spRisk>=3.6) return 'Diminisher';
  return 'Accidental Diminisher';
}
function buildInsights(vals, spRisk){
  const insights = document.getElementById('insights'); insights.innerHTML='';
  const multAvg = vals.reduce((a,b)=>a+b,0)/vals.length;
  const cls = classify(multAvg, spRisk);
  const chips = document.getElementById('chips'); chips.innerHTML='';
  const chip = (txt)=>{ const c=document.createElement('span'); c.className='chip'; c.textContent=txt; return c; };
  chips.appendChild(chip(`Bendras įvertinimas: ${cls}`));
  chips.appendChild(chip(`Multiplier vidurkis: ${multAvg.toFixed(2)}`));
  chips.appendChild(chip(`Rizikos (SP raw) vidurkis: ${spRisk.toFixed(2)}`));

  // Top2 ir Low1
  const pairs = ARCH.map((a,i)=>({name:a.name, val:vals[i]}));
  pairs.sort((x,y)=>y.val-x.val);
  const top2 = pairs.slice(0,2);
  const low1 = pairs[pairs.length-1];

  const h3a = document.createElement('h3'); h3a.textContent = 'Stiprybės (Top 2)'; insights.appendChild(h3a);
  const ulA = document.createElement('ul');
  top2.forEach(p=>{
    const li=document.createElement('li'); li.innerHTML=`<strong>${p.name}</strong> — ${p.val.toFixed(2)}. Praktika: `+(
      p.name==='Talent Magnet' ? 'pastebėk ir pakviesk žmones atsiskleisti; reguliariai skirk laiką talentui.' :
      p.name==='Liberator' ? 'aiškūs standartai + „saugus bandymų laukas“; taisyk klaidas be kaltinimų.' :
      p.name==='Challenger' ? 'formuluok ambiciją ir „kodėl“; padėk komandai sukurti kelią „kaip padarysime“.' :
      p.name==='Debate Maker' ? 'kviesk skirtingas perspektyvas; prieš sprendimą matuok argumentus ir faktus.' :
      'deleguok rezultatą (ne tik užduotis); sutark dėl resursų ir patikros taškų.'
    ); ulA.appendChild(li);
  }); insights.appendChild(ulA);

  const h3b = document.createElement('h3'); h3b.textContent = 'Kur reikalingas dėmesys (Low 1)'; insights.appendChild(h3b);
  const ulB = document.createElement('ul'); const liB=document.createElement('li'); liB.innerHTML=`<strong>${low1.name}</strong> — ${low1.val.toFixed(2)}. Tikslas: padidinti iki ≥3.6 per 30 d.`; ulB.appendChild(liB); insights.appendChild(ulB);

  const h3c = document.createElement('h3'); h3c.textContent = 'Rekomendacijos (30 d.)'; insights.appendChild(h3c);
  const ulC = document.createElement('ul');
  // Rekomendacijų logika pagal klasę ir SP riziką
  if(cls==='Multiplier'){
    ulC.innerHTML = '<li>Užfiksuok ir pasidalyk 3 situacijomis, kur panaudojai Top archetipą — mokyk komandos narius.</li>'+
                    '<li>Įtrauk 2 žmones į sprendimų diskusiją (Debate Maker), kurių perspektyva retai girdima.</li>'+
                    '<li>Deleguok 1 rezultatą su aiškiais KPI ir „patikros taškais“ (Investor).</li>';
  } else if(cls==='Accidental Diminisher'){
    ulC.innerHTML = '<li>Identifikuok 2 momentus per savaitę, kai per daug skubi/kalbi — duok erdvės komandai siūlyti sprendimus.</li>'+
                    '<li>Prieš sprendimą, sustok ir paprašyk 1 faktą + 1 prieštaringą nuomonę (Debate Maker ritualas).</li>'+
                    '<li>Jei SP rizika aukšta, suplanuok 2 sunkesnius pokalbius ir naudok AAR (After Action Review) po jų.</li>';
  } else {
    ulC.innerHTML = '<li>Stabdyk „mikro-valdymą“: užrašyk 3 užduotis kaip rezultatus (ką), ne veiklas (kaip), ir deleguok su resursais.</li>'+
                    '<li>Sukurk aiškius komandos standartus (Liberator) ir patikros ritmą 1×/sav. be kaltinimų.</li>'+
                    '<li>Prieš priimdamas sprendimą, surink 3 alternatyvas su +/– sąrašu; leisk komandai rinktis.</li>';
  }
  insights.appendChild(ulC);

  const h3d = document.createElement('h3'); h3d.textContent = 'Kaip perskaityti radarą'; insights.appendChild(h3d);
  const pD = document.createElement('p'); pD.className='legend'; pD.textContent='Kuo arčiau išorės, tuo aukštesnis archetipų vidurkis (1–5). SP rizika skaičiuojama RAW (prieš invertavimą); aukštesnis skaičius → didesnė rizika.'; insights.appendChild(pD);

  return {cls, multAvg};
}

// --------- Veiksmai ---------
function calc(){
  const {scores,counts,missing,spRawAvg}=collect();
  if(missing>0){ document.getElementById('status').innerHTML=`Liko neatsakytų: <span class=bad>${missing}</span>`; return; }
  const vals=ARCH.map(a=>normalize(scores[a.key],counts[a.key]));
  drawRadar(vals);
  const maxIdx=vals.indexOf(Math.max(...vals)); const best=ARCH[maxIdx];
  const {cls, multAvg} = buildInsights(vals, spRawAvg);
  document.getElementById('summary').innerHTML=
    `Bendra: <strong>${cls}</strong> · Multiplier vidurkis: <strong>${multAvg.toFixed(2)}</strong> · Dominuojantis archetipas: <strong>${best.name}</strong>. `+
    ARCH.map((a,i)=>`${a.name}: ${vals[i].toFixed(2)}`).join(' | ');
  document.getElementById('status').textContent='✅ Apskaičiuota.';
}
function reset(){ document.querySelectorAll('.q input[type=radio]:checked').forEach(i=>i.checked=false); document.getElementById('summary').textContent='Kol kas neapskaičiuota.'; document.getElementById('chips').innerHTML=''; document.getElementById('insights').innerHTML=''; document.getElementById('status').textContent=''; drawRadar([0,0,0,0,0]); }
function toggleTheme(){ const html=document.documentElement; const isLight=html.getAttribute('data-theme')==='light'; html.setAttribute('data-theme', isLight? '' : 'light'); drawRadar([0,0,0,0,0]); }
function initApp(){ renderQuestions(); reset(); document.getElementById('calc').addEventListener('click', calc); document.getElementById('reset').addEventListener('click', ()=>{ renderQuestions(); reset(); }); document.getElementById('pdf').addEventListener('click', ()=>window.print()); document.getElementById('theme').addEventListener('click', toggleTheme); document.getElementById('libStatus').textContent='Bibliotekos: SVG (be Chart.js)'; }
window.addEventListener('DOMContentLoaded', initApp);
</script>
</body>
</html>